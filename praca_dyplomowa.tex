\documentclass[a4paper]{article}
\usepackage[vmargin=1in,hmargin=1.25in]{geometry}
\usepackage[utf8]{inputenc}

\usepackage{anyfontsize}
\usepackage{fontspec}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{indentfirst}
\usepackage{afterpage}
\usepackage[hidelinks]{hyperref}
\usepackage[titles]{tocloft}
\usepackage[polish]{babel}
\usepackage{etoolbox} % for \patchcmd

\usepackage{chngcntr}
\counterwithin{figure}{section}

\usepackage{graphicx}
\usepackage{subfig}
\usepackage{placeins}

\usepackage{listings}
\lstset{basicstyle=\ttfamily,breaklines=true}

\renewcommand\cftsecafterpnum{\vskip6pt}
\renewcommand\cftsubsecafterpnum{\vskip6pt}

\renewcommand{\cftsecfont}{\bfseries\arialsection}
\renewcommand{\cftsubsecfont}{\arialsubsection}

\setmainfont{Times New Roman}
\setmonofont[Scale=MatchLowercase]{Fira Code}

\newfontfamily\arialsection{Arial Narrow}
\newfontfamily\arialsubsection{Arial Narrow}

\titleformat{\section}
  {\arialsection\bfseries\fontsize{14pt}{18pt}\selectfont}{\thesection.}{1em}{}

\titleformat{\subsection}
  {\arialsubsection\bfseries\fontsize{13pt}{18pt}\selectfont}{\thesubsection.}{1em}{}

\fontsize{12pt}{0pt}\selectfont

\onehalfspacing

\patchcmd{\tableofcontents}{\contentsname}{\MakeUppercase\contentsname}{}{}


\begin{document}

\counterwithin{lstlisting}{section}

\renewcommand{\lstlistlistingname}{S\MakeLowercase{pis listingów}}
\renewcommand*\listfigurename{Spis rysunków} 

\pagenumbering{gobble}

\input{./sections/header.tex}
\input{./sections/titles.tex}

\pagenumbering{arabic}
\input{./sections/toc.tex}

\input{./sections/introduction.tex}

\FloatBarrier

\input{./sections/aim_and_scope.tex}

\FloatBarrier

\input{./sections/comparison.tex}

\FloatBarrier

\input{./sections/system_design.tex}

\FloatBarrier

\input{./sections/key_functionality_implementation.tex}

\FloatBarrier

\input{./sections/tests.tex}

\clearpage

\input{./sections/ending.tex}

\clearpage

\bibliographystyle{plain}
\bibliography{references.bib}

\listoffigures

\lstlistoflistings

\end{document}
