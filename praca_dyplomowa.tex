\documentclass[12pt]{article}
\usepackage[a4paper, vmargin=1in, hmargin=1.25in]{geometry}
\usepackage[utf8]{inputenc}

\usepackage{anyfontsize}
\usepackage{fontspec}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{indentfirst}
\usepackage{afterpage}
\usepackage[hidelinks]{hyperref}
\usepackage[titles]{tocloft}
\usepackage[polish]{babel}
\usepackage{etoolbox} % for \patchcmd

\usepackage[nosingleletter]{impnattypo}

\usepackage{chngcntr}
\counterwithin{figure}{section}

\usepackage{graphicx}
\usepackage{subfig}
\usepackage{placeins}

\usepackage{listings}
\lstset{basicstyle=\ttfamily,breaklines=true}

\renewcommand\cftsecafterpnum{\vskip6pt}
\renewcommand\cftsubsecafterpnum{\vskip6pt}

\renewcommand{\cftsecfont}{\bfseries\arialnarrowbold}
\renewcommand{\cftsubsecfont}{\arialnarrow}

\setmainfont{Times New Roman}
\setmonofont[Scale=MatchLowercase]{Fira Code}

\newfontfamily\arialnarrowbold{Arial Narrow Bold}
\newfontfamily\arialnarrow{Arial Narrow}

\titleformat{\section}
  {\arialnarrowbold\bfseries\fontsize{14pt}{18pt}\selectfont}{\thesection.}{1em}{}

\titleformat{\subsection}
  {\arialnarrowbold\bfseries\fontsize{13pt}{18pt}\selectfont}{\thesubsection.}{1em}{}

\fontsize{12pt}{0pt}\selectfont

\onehalfspacing

\patchcmd{\tableofcontents}{\contentsname}{\MakeUppercase\contentsname}{}{}

\begin{document}

\counterwithin{lstlisting}{section}

\renewcommand{\lstlistlistingname}{S\MakeLowercase{pis listingów}}
\renewcommand*\listfigurename{Spis rysunków} 

\pagenumbering{gobble}

\input{./sections/header.tex}
\input{./sections/titles.tex}

\pagenumbering{arabic}
\input{./sections/toc.tex}

\input{./sections/introduction.tex}

\FloatBarrier
\clearpage

\input{./sections/aim_and_scope.tex}

\FloatBarrier
\clearpage

\input{./sections/comparison.tex}

\FloatBarrier
\clearpage

\input{./sections/system_design.tex}

\FloatBarrier
\clearpage

\input{./sections/key_functionality_implementation.tex}

\FloatBarrier
\clearpage

\input{./sections/tests.tex}

\clearpage
\clearpage

\input{./sections/ending.tex}

\clearpage

{
    \let\sffamily\rmfamily
    \let\ttfamily\rmfamily
    \let\bfseries\mdseries
    \let\scshape\upshape
    \let\slshape\upshape
    \let\itshape\upshape
    \let\em\upshape
    \def\UrlFont{\normalfont}
    \raggedleft

    \bibliographystyle{plain}
    \bibliography{references.bib}
}

\clearpage

\listoffigures

\clearpage

\lstlistoflistings

\end{document}
